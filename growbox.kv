
MainScreen:

<ConfirmationPopup>
    action : None

    auto_dismiss:False
    size_hint:None,None
    width:534
    height:270
    title:""
    separator_height:0
    padding:15
    GridLayout:
        cols:1
        canvas.before:
            Color:
                rgba: (0,0,0,1)
            Rectangle:
                size: self.width ,self.height
                pos: self.pos
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                source: "assets/violet.png"
                size: 255 ,170
                pos: self.x + 510 - 255, self.y  
        GridLayout:
            size_hint:1, None
            size:self.minimum_size
            cols:1   
            Label:
                text: "CONFIRMATION"
                size_hint:None,None
                size:self.texture_size
                padding_x:20
                padding_y:20
                height:40
                font_size: 18
                font_name: 'fonts/cinema-script.otf'
            ExoLabel:
                id:popup_text
                markup:True
                size_hint:None,None 
                size:self.texture_size
                line_height:1.5
                text:"If you know what you are doing,\nclick [color=496A4B][b][font=fonts/cinema-script.otf]YES[/font][/b][/color] otherwise click [color=C74449][b][font=fonts/cinema-script.otf]NO[/font][/b][/color]"
                font_size:18
                padding_x:20
                padding_y:8
            GridLayout:
                size_hint:.5, None
                size:self.minimum_size
                cols:2
                padding:10, 30, 20, 20
                GridLayout:
                    size_hint:.4, None
                    size:self.minimum_size
                    cols:1
                    Button:
                        id:b_yes
                        text: "YES"
                        size_hint:None, None
                        height:40
                        width:75
                        background_normal: ""
                        background_color: [73 / 253,106 / 253 ,72 / 253, 1]
                        padding_y:8
                        padding_x:10
                        font_name: 'fonts/cinema-script.otf'
                        on_press: root.confirm(root.action)
                        
                GridLayout:
                    size_hint:.5, None
                    size:self.minimum_size
                    cols:1
                    Button:
                        text: "NO"
                        size_hint:None, None
                        height:40
                        width:75
                        background_normal: ""
                        background_color: [199 / 253,68/ 253 ,73 / 253, 1]
                        padding_y:8
                        padding_x:10
                        font_name: 'fonts/cinema-script.otf'
                        on_press: root.dismiss()
<SavedPopup>
    action : None

    auto_dismiss:False
    size_hint:None,None
    width:534
    height:270
    title:""
    separator_height:0
    padding:15
    GridLayout:
        cols:1
        canvas.before:
            Color:
                rgba: (0,0,0,1)
            Rectangle:
                size: self.width ,self.height
                pos: self.pos
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                source: "assets/jh.png"
                size: 171 ,195
                pos: self.x + 594 - 255, self.y  
        GridLayout:
            size_hint:1, None
            size:self.minimum_size
            cols:1   
            Label:
                text: "SAVED"
                size_hint:None,None
                size:self.texture_size
                padding_x:20
                padding_y:20
                height:40
                font_size: 18
                font_name: 'fonts/cinema-script.otf'
            ExoLabel:
                id:popup_text
                markup:True
                size_hint:None,None 
                size:self.texture_size
                line_height:1.5
                text:"For come back on Main Screen\nclick [color=496A4B][b][font=fonts/cinema-script.otf]YES[/font][/b][/color] otherwise click [color=C74449][b][font=fonts/cinema-script.otf]NO[/font][/b][/color]"
                font_size:18
                padding_x:20
                padding_y:8
            GridLayout:
                size_hint:.5, None
                size:self.minimum_size
                cols:2
                padding:20, 30, 20, 20
                GridLayout:
                    size_hint:.4, None
                    size:self.minimum_size
                    cols:1
                    Button:
                        id:b_yes
                        text: "YES"
                        size_hint:None, None
                        height:40
                        width:75
                        background_normal: ""
                        background_color: [73 / 253,106 / 253 ,72 / 253, 1]
                        padding_y:8
                        padding_x:10
                        font_name: 'fonts/cinema-script.otf'
                        on_press: root.confirm(root.action)
                        
                GridLayout:
                    size_hint:.5, None
                    size:self.minimum_size
                    cols:1
                    Button:
                        text: "NO"
                        size_hint:None, None
                        height:40
                        width:75
                        background_normal: ""
                        background_color: [199 / 253,68/ 253 ,73 / 253, 1]
                        padding_y:8
                        padding_x:10
                        font_name: 'fonts/cinema-script.otf'
                        on_press: root.dismiss()


<Separator@Widget>:
    size_hint_y: None
    height:1
    canvas:
        Color:
            rgba: 136 / 253, 134 / 253, 134 / 253, .5
        Rectangle:
            pos: self.pos
            size:root.width, 1

<HSeparator@Separator>:
    size_hint_y: None
    height: dp(2)
<ExoLabel@Label>
    font_name: 'fonts/exo.ttf'
<GrowButtonAction@Button>
    size_hint:None, None
    height:40
    background_normal: ""
    background_color: [73 / 253,106 / 253 ,72 / 253, 1]
    padding_y:8
    padding_x:10
    font_name: 'fonts/cinema-script.otf'
<GrowButtonPrimary@Button>
    size_hint:None, None
    height:40
    background_normal: ""
    background_color: [110 / 253 ,129 / 253 ,6 / 253,1]
    padding_y:8
    padding_x:10
    font_name: 'fonts/cinema-script.otf'
    
<MainScreen>
    time_of_the_day_source : ""
 
    canvas.before:
        Color:
            rgba: (1,1,1,1)
        Rectangle:
            source: "assets/bgr.png"
            size: root.width, root.height
            pos: self.pos
        Rectangle:
            id: time_icon
            source: self.time_of_the_day_source
            size: (50, 50) if self.time_of_the_day_source else (0,0)
            pos:  20, root.height - 61

    GridLayout:     
        size_hint:1, None
        height: root.height
        padding: 20,12,20,26
        cols:1
        GridLayout: 
            cols:1 
            size_hint:1, .45
            Label: 
                text: "GROW BOX"
                size_hint: 1, None
                size: self.texture_size
                padding_y: 12
                font_size: 26
                font_name: "fonts/cinema-script.otf"
            ExoLabel:
                id:clock 
                text: "12:34"
                size_hint: 1, None
                size: self.texture_size
                font_size:80
            ExoLabel:
                id: calendar
                text:"Monday, September 5th, 2023"
                size_hint: 1, None
                size: self.texture_size
                font_size:20
                padding_y:10
                line_height:.3
            ExoLabel:
                id: all_days_counter
                text: "5th day of grow"
                size_hint: 1, None
                size: self.texture_size
                font_size:18
            Separator:
                height:20
        GridLayout:
            cols:2
            size_hint:1, .40
            GridLayout:
                padding:0, 20, 0, 0
                spacing:16
                cols:1
                size_hint:.4, self.height
                GridLayout:
                    size_hint:1, .5
                    spacing:16
                    cols:1
                    ExoLabel:
                        id: day_start 
                        text: "DAY START IS NOT ACTIVATED"
                        size_hint: None, None
                        size: self.texture_size
                        font_size:18
                    ExoLabel:
                        id: day_end
                        text: "DAY FINISH IS NOT ACTIVATED"
                        size_hint: None, None
                        size: self.texture_size
                        font_size:18
                    Separator:  
                GridLayout:
                    size_hint:1, .5
                    spacing:16
                    cols:1
                    ExoLabel:
                        id:v_days
                        text: "VEGETATION: 5th DAY"
                        size_hint: None, None
                        size: self.texture_size
                        font_size:18
                    ExoLabel:
                        id: f_days
                        text: "FLOWERING :"
                        size_hint: None, None
                        size: self.texture_size
                        font_size:18
                    Separator:
            GridLayout:
                cols:2
                size_hint:.6,1
                padding: 45,18,0,15
                AnchorLayout:
                    ExoLabel:
                        id: temperature
                        progress: -140
                        progress_color: (173/253, 173/253, 173/253, .75)
                        text: "0"
                        size_hint: .5, None
                        height:150
                        font_size:34 
                        canvas:
                            Color:
                                rgba:(173/253, 173/253, 173/253, .75)
                            Line:
                                width:5
                                circle:(self.center_x, self.center_y , min(150, 150)/ 2, -140,140)
                            Color:
                                rgba: self.progress_color
                            Line:
                                width:5
                                circle:(self.center_x, self.center_y , min(150, 150)/ 2, -140,self.progress)
                AnchorLayout: 
                    ExoLabel:
                        id: humidity
                        progress: -140
                        progress_color: (173/253, 173/253, 173/253, .75)
                        text: "0"
                        size_hint: .5, None
                        height:150
                        font_size:34
                        canvas:
                            Color:
                                rgba:(173/253, 173/253, 173/253, .75)
                            Line:
                                width:5
                                circle:(self.center_x, self.center_y, min(150, 150)/ 2, -140,140)
                            Color:
                                rgba: self.progress_color
                            Line:
                                width:5
                                circle:(self.center_x, self.center_y, min(150, 150)/ 2, -140,self.progress)   
                ExoLabel:
                    text: "Temperature"
                    font_size:22
                    size_hint: .5, None
                    height:20
                    font_size:18
                ExoLabel:
                    text: "Humidity"
                    font_size:18
                    size_hint: .5, None
                    height:20
        GridLayout:
            cols:3
            size_hint: 1, .15
            spacing: 35
            GrowButtonPrimary:
                text:"SETTING"
                width: 150
                on_press: root.manager.current = "SettingsScreen"
            GrowButtonPrimary:
                text:"STATISTICS"
                width:150
                on_press: root.open_popup()
            AnchorLayout:
                anchor_x: "right"
                anchor_y: "bottom"
                GrowButtonAction:
                    id: start_btn 
                    text:"START GROW"
                    width:170
                    on_press: root.start_to_grow()
                    



<SettingsScreen>

    canvas:
        Color:
            rgba: (1,1,1,1)
    
        Rectangle:
            source: "assets/bgr3.png"
            size: root.width, root.height
            pos: self.pos
    GridLayout:
        size_hint:1, None
        height: root.height
        padding: 20,12,20,15
        cols:1
        Label: 
            text:"SETTINGS"
            size_hint: 1, None
            size: self.texture_size
            padding_y: 12
            font_size: 26
            font_name: "fonts/cinema-script.otf"
        ExoLabel:
            size_hint:None,None
            size:self.texture_size
            text:"Day starts at :"
            font_size:18

        GridLayout:
            cols:2
            size_hint:1, None
            size:self.minimum_size
            GridLayout:
                cols:5
                size_hint:.5, None
                height: 60
                Label:
                    id:config_start_hour
                    canvas.before:
                        Color:
                            rgba: [2 / 253, 98/ 253 ,103 / 253, 1]
                        Rectangle:
                            size:self.size
                            pos: self.pos
                    text: ""
                    size_hint:None,None
                    width: 60
                    height:60
                    font_size:30
                GridLayout:
                    rows:2
                    spacing:2
                    size_hint:None, None
                    width:30
                    height:60
                    Button:
                        id:b_add_hour
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"+"
                        font_size:26
                        disabled: False
                        on_press: root.add_hour()
                    Button:
                        id:b_minus_hour
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"-"
                        font_size:36
                        disabled: False
                        on_press: root.minus_hour()
                Label:
                    size_hint:None,None
                    width: 20
                    height:60
                    font_size:30
                    text:" : "
                Label:
                    id:config_start_minute
                    canvas.before:
                        Color:
                            rgba: [2 / 253, 98/ 253, 103 / 253, 1]
                        Rectangle:
                            size:self.size
                            pos: self.pos
                    text: ""
                    size_hint:None,None
                    width: 60
                    height:60
                    font_size:30
                GridLayout:
                    rows:2
                    spacing:2
                    size_hint:None, None
                    width:30
                    height:60
                    Button:
                        id:b_add_minute
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"+"
                        font_size:26
                        disabled: False
                        on_press: root.add_minute()
                    Button:
                        id:b_minus_minute
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"-"
                        font_size:36
                        disabled: False
                        on_press: root.minus_minute()
            GridLayout:
                size_hint:.5, None
                height: 90
                spacing:10
                cols:1
                Button:
                    id:b_start_vegetative
                    size_hint:None,None
                    width: 200
                    height: 40
                    text:   "START VEGETATION"
                    background_normal: ""
                    bold:True
                    disabled: False
                    background_color: [73 / 253,106 / 253 ,72 / 253, 1]
                    on_press: root.open_popup_vegetative()
                Button:
                    id: b_start_flowering
                    size_hint:None,None
                    width: 200
                    height: 40
                    text:   "START FLOWERING"
                    background_normal: ""
                    bold:True
                    disabled: True
                    background_color: [68 / 253,16 / 253 ,95 / 253, 1]
                    on_press: root.open_popup_flowering()
        Separator:
            height:32
        GridLayout:
            cols:2
            size_hint:1 ,None  
            size:self.minimum_size
            padding:0,20,0,20
            GridLayout:
                cols:1
                size_hint:.5, None
                size:self.minimum_size
                spacing:15
                ExoLabel:
                    id:v_label
                    size_hint:None,None
                    text:"VEGETATION"
                    size:self.texture_size
                    font_size:22
                ExoLabel:
                    size_hint:None,None
                    text:"Minimum Humidity"
                    size:self.texture_size
                    font_size:18
                    padding_y:12
            GridLayout:
                cols:1
                spacing:15
                size_hint:.5, None
                size:self.minimum_size
                ExoLabel:
                    id:f_label
                    size_hint:None,None
                    text:"FLOWERING"
                    font_size:22
                    size:self.texture_size
                ExoLabel:
                    size_hint:None,None
                    text:"Minimum Humidity"
                    size:self.texture_size
                    font_size:18
                    padding_y:12
            GridLayout:
                cols:2
                size_hint:1, None
                height: 60
                
                Label:
                    id:v_min_humidity
                    canvas.before:
                        Color:
                            rgba: [73 / 253,106 / 253 ,72 / 253, 1]
                        Rectangle:
                            size:self.size
                            pos: self.pos
                    text: "10"
                    size_hint:None,None
                    width: 60
                    height:60
                    font_size:30
                GridLayout:
                    rows:2
                    spacing:2
                    size_hint:None, None
                    width:30
                    height:60
                    Button:
                        id:b_v_min_plus
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29   
                        text:"+"
                        font_size:26
                        disabled:False
                        on_press: root.add_humidity(root.ids.v_min_humidity, root.ids.v_label.text)
                    Button:
                        id: b_v_min_minus
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"-"
                        font_size:36
                        disabled:False
                        on_press: root.minus_humidity(root.ids.v_min_humidity, root.ids.v_label.text)
            GridLayout:
                cols:2
                size_hint:1, None
                height: 60
                Label:
                    id: f_min_humidity
                    canvas.before:
                        Color:
                            rgba: [68 / 253,16 / 253 ,95 / 253, 1]
                        Rectangle:
                            size:self.size
                            pos: self.pos
                    text: "10"
                    size_hint:None,None
                    width: 60
                    height:60
                    font_size:30
                GridLayout:
                    rows:2
                    spacing:2
                    size_hint:None, None
                    width:30
                    height:60
                    Button:
                        id: b_f_min_plus
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29    
                        text:"+"
                        font_size:26
                        disabled:False
                        on_press:root.add_humidity(root.ids.f_min_humidity,root.ids.f_label.text)
                    Button:
                        id:b_f_min_minus
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"-"
                        font_size:36
                        disabled:False
                        on_press:root.minus_humidity(root.ids.f_min_humidity,root.ids.f_label.text)
            GridLayout:
                cols:1
                padding: 0 ,20, 0 ,12
                size_hint:1, None
                size:self.minimum_size
                ExoLabel:
                    size_hint:None,None
                    text:"Maximum Humidity"
                    size:self.texture_size
                    font_size:18
            GridLayout:
                cols:1
                padding: 0 ,20, 0 ,12
                size_hint:1, None
                size:self.minimum_size
                ExoLabel:
                    size_hint:None,None
                    text:"Maximum Humidity"
                    size:self.texture_size
                    font_size:18
            GridLayout:
                cols:2
                size_hint:1, None
                height: 60
                Label:
                    id: v_max_humidity
                    canvas.before:
                        Color:
                            rgba: [73 / 253,106 / 253 ,72 / 253, 1]
                        Rectangle:
                            size:self.size
                            pos: self.pos
                    text: "20"
                    size_hint:None,None
                    width: 60
                    height:60
                    font_size:30
                GridLayout:
                    rows:2
                    spacing:2
                    size_hint:None, None
                    width:30
                    height:60
                    Button:
                        id:b_v_max_plus
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"+"
                        font_size:26
                        disabled:False
                        on_press:root.add_humidity(root.ids.v_max_humidity,root.ids.v_label.text)
                    Button:
                        id:b_v_max_minus
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"-"
                        font_size:36
                        on_press:root.minus_humidity(root.ids.v_max_humidity, root.ids.v_label.text)
            GridLayout:
                cols:2
                size_hint:1, None
                height: 60
                Label:
                    id:f_max_humidity
                    canvas.before:
                        Color:
                            rgba:  [68 / 253,16 / 253 ,95 / 253, 1]
                        Rectangle:
                            size:self.size
                            pos: self.pos
                    text: "20"
                    size_hint:None,None
                    width: 60
                    height:60
                    font_size:30
                GridLayout:
                    rows:2
                    spacing:2
                    size_hint:None, None
                    width:30
                    height:60
                    Button:
                        id:b_f_max_plus
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"+"
                        font_size:26
                        disabled:False
                        on_press:root.add_humidity(root.ids.f_max_humidity, root.ids.f_label.text)
                    Button:
                        id:b_f_max_minus
                        background_normal: ""
                        background_color: (0,0,0,1)
                        size_hint:None,None
                        width: 30
                        height:29
                        text:"-"
                        font_size:36
                        on_press:root.minus_humidity(root.ids.f_max_humidity, root.ids.f_label.text)
        Separator:
            height:1      
        GridLayout:
            cols:2
            GrowButtonPrimary:
                text:"SAVE"
                width: 150
                on_press: root.save_humidity_ranges()
            AnchorLayout:
                anchor_x: "right"
                anchor_y: "bottom"
                GrowButtonAction:
                    text:"BACK"
                    width:150  
                    background_color:[199 / 253, 68 / 253, 73 / 253, 1]
                    on_press:root.manager.current = "MainScreen"    
<StatisticsWidget>  
    Button:
        text:"Haalo"           
        
    